<ul class="breadcrumbs">
  <li><a href="{{ '/' | relative_url }}">{{ site.title }}</a> &raquo; </li>
  {% comment %} Create an empty array {% endcomment %}
  {% assign breadcrumb_paths = '' | split: ',' %}
  {% assign dir_segments = page.dir | split: '/' %}
  {% for segment in dir_segments %}
    {% assign breadcrumb_path = breadcrumb_paths.last | append: segment | append: '/' %}
    {% assign breadcrumb_paths = breadcrumb_paths | push: breadcrumb_path %}
  {% endfor %}
  {% if breadcrumb_paths.size == 0 %}
    {% assign breadcrumb_paths = breadcrumb_paths | push: '/' %}
  {% endif %}
  {% for breadcrumb_path in breadcrumb_paths %}
    {% for site_page in site.pages %}
      {% if site_page.url == breadcrumb_path and site_page.url != '/' and site_page.url != page.url %}
      {% assign directory_title = site_page.dir | split: '/' | last | capitalize %}
      <li><a href="{{ site_page.url | relative_url }}">{{ site_page.title | default: directory_title }}</a> &raquo; </li>
      {% endif %}
    {% endfor %}
  {% endfor %}
  <li class="breadcrumbs-aside"><a href="{% github_edit_link %}"><span class="fab fa-github"></span> Edit on GitHub</a></li>
</ul>
